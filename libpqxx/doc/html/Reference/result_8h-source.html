<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>result.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>result.h</h1><a href="result_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*-------------------------------------------------------------------------</font>
00002 <font class="comment"> *</font>
00003 <font class="comment"> *   FILE</font>
00004 <font class="comment"> *      pqxx/result.h</font>
00005 <font class="comment"> *</font>
00006 <font class="comment"> *   DESCRIPTION</font>
00007 <font class="comment"> *      definitions for the pqxx::Result class and support classes.</font>
00008 <font class="comment"> *   pqxx::Result represents the set of result tuples from a database query</font>
00009 <font class="comment"> *</font>
00010 <font class="comment"> * Copyright (c) 2001-2002, Jeroen T. Vermeulen &lt;jtv@xs4all.nl&gt;</font>
00011 <font class="comment"> *</font>
00012 <font class="comment"> *-------------------------------------------------------------------------</font>
00013 <font class="comment"> */</font>
00014 <font class="preprocessor">#ifndef PQXX_RESULT_H</font>
00015 <font class="preprocessor"></font><font class="preprocessor">#define PQXX_RESULT_H</font>
00016 <font class="preprocessor"></font>
00017 <font class="preprocessor">#include &lt;stdexcept&gt;</font>
00018 
00019 <font class="preprocessor">#include "<a class="code" href="util_8h.html">pqxx/util.h</a>"</font>
00020 
00021 <font class="comment">/* Methods tested in eg. self-test program test1 are marked with "//[t1]"</font>
00022 <font class="comment"> */</font>
00023 
00024 
00025 <font class="comment">// TODO: Support postgres arrays</font>
00026 <font class="comment">// TODO: Cursor-based bidirectional iterators for hidden incremental retrieval</font>
00027 
00028 <font class="keyword">namespace </font>pqxx
00029 {
00030 
00032 
<a name="l00039"></a><a class="code" href="classpqxx_1_1Result.html">00039</a> <font class="keyword">class </font><a class="code" href="compiler_8h.html#a0">PQXX_LIBEXPORT</a> <a class="code" href="classpqxx_1_1Result.html">Result</a>
00040 {
00041 <font class="keyword">public</font>:
<a name="l00042"></a><a class="code" href="classpqxx_1_1Result.html#a0">00042</a>   <a class="code" href="classpqxx_1_1Result.html">Result</a>() : m_Result(0), m_Refcount(0) {}                              <font class="comment">//[t3]</font>
<a name="l00043"></a><a class="code" href="classpqxx_1_1Result.html#a1">00043</a>   <a class="code" href="classpqxx_1_1Result.html">Result</a>(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result.html">Result</a> &amp;rhs) :                                           <font class="comment">//[t1]</font>
00044           m_Result(0), m_Refcount(0) { MakeRef(rhs); }
<a name="l00045"></a><a class="code" href="classpqxx_1_1Result.html#a2">00045</a>   ~<a class="code" href="classpqxx_1_1Result.html">Result</a>() { LoseRef(); }                                              <font class="comment">//[t1]</font>
00046   
00047   Result &amp;operator=(<font class="keyword">const</font> Result &amp;);                                    <font class="comment">//[t10]</font>
00048 
<a name="l00049"></a><a class="code" href="classpqxx_1_1Result.html#s0">00049</a>   <font class="keyword">typedef</font> <a class="code" href="namespacepqxx.html#a1">Result_size_type</a> size_type;
00050   <font class="keyword">class </font><a class="code" href="classpqxx_1_1Result_1_1Field.html">Field</a>;
00051 
00052   <font class="comment">// TODO: Field iterators</font>
00053  
00055 
<a name="l00063"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html">00063</a>   <font class="keyword">class </font><a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>
00064   {
00065   <font class="keyword">public</font>:
<a name="l00066"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#s0">00066</a>     <font class="keyword">typedef</font> <a class="code" href="namespacepqxx.html#a2">Tuple_size_type</a> size_type;
<a name="l00067"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#a0">00067</a>     <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result.html">Result</a> *r, size_type i) : m_Home(r), m_Index(i) {}
<a name="l00068"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#a1">00068</a>     ~<a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>() {} <font class="comment">// Yes Scott Meyers, you're absolutely right[1]</font>
00069 
00070     <font class="keyword">inline</font> Field operator[](size_type) <font class="keyword">const</font>;                           <font class="comment">//[t1]</font>
00071     Field operator[](<font class="keyword">const</font> <font class="keywordtype">char</font>[]) <font class="keyword">const</font>;                               <font class="comment">//[t11]</font>
<a name="l00072"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#a4">00072</a>     <a class="code" href="classpqxx_1_1Result_1_1Field.html">Field</a> operator[](PGSTD::string s) <font class="keyword">const</font>                             <font class="comment">//[t11]</font>
00073         { <font class="keywordflow">return</font> operator[](s.c_str()); }
00074     Field at(size_type) <font class="keyword">const</font>;                                          <font class="comment">//[t10]</font>
00075     Field at(<font class="keyword">const</font> <font class="keywordtype">char</font>[]) <font class="keyword">const</font>;                                       <font class="comment">//[t11]</font>
<a name="l00076"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#a7">00076</a>     <a class="code" href="classpqxx_1_1Result_1_1Field.html">Field</a> at(PGSTD::string s)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> at(s.c_str()); }           <font class="comment">//[t11]</font>
00077 
00078     <font class="keyword">inline</font> size_type size() <font class="keyword">const</font>;                                      <font class="comment">//[t11]</font>
00079 
<a name="l00080"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#a9">00080</a>     Result::size_type Row()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> m_Index; }                   <font class="comment">//[t11]</font>
00081 
00082   <font class="keyword">protected</font>:
<a name="l00083"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#n0">00083</a>     <font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result.html">Result</a> *m_Home;
<a name="l00084"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#n1">00084</a>     Result::size_type m_Index;
00085   };
00086 
00087 
00089 
<a name="l00092"></a><a class="code" href="classpqxx_1_1Result_1_1Field.html">00092</a>   <font class="keyword">class </font><a class="code" href="classpqxx_1_1Result_1_1Field.html">Field</a> : <font class="keyword">private</font> <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>
00093   {
00094   <font class="keyword">public</font>:
00095     <font class="keyword">using</font> Tuple::size_type;
00096 
<a name="l00097"></a><a class="code" href="classpqxx_1_1Result_1_1Field.html#a0">00097</a>     <a class="code" href="classpqxx_1_1Result_1_1Field.html">Field</a>(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a> &amp;R, Tuple::size_type C) : <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>(R), m_Col(C) {}   <font class="comment">//[t1]</font>
00098 
<a name="l00100"></a><a class="code" href="classpqxx_1_1Result_1_1Field.html#a1">00100</a>     <font class="keyword">const</font> <font class="keywordtype">char</font> *c_str()<font class="keyword"> const </font>{<font class="keywordflow">return</font> m_Home-&gt;GetValue(m_Index,m_Col);} <font class="comment">//[t2]</font>
00101 
00103     <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">char</font> *Name() <font class="keyword">const</font>;                                    <font class="comment">//[t11]</font>
00104 
<a name="l00106"></a><a class="code" href="classpqxx_1_1Result_1_1Field.html#a3">00106</a>     <font class="keyword">template</font>&lt;<font class="keyword">typename</font> T&gt; <font class="keywordtype">bool</font> to(T &amp;Obj) <font class="keyword">const</font>                          <font class="comment">//[t1]</font>
00107     {
00108       <font class="keywordflow">if</font> (is_null())
00109         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00110 
00111       <font class="keywordflow">try</font>
00112       {
00113         <a class="code" href="namespacepqxx.html#a21">FromString</a>(c_str(), Obj);
00114       }
00115       <font class="keywordflow">catch</font> (<font class="keyword">const</font> PGSTD::exception &amp;e)
00116       {
00117         <font class="keywordflow">throw</font> PGSTD::runtime_error(<font class="stringliteral">"Error reading field "</font> + 
00118                                  PGSTD::string(Name()) +
00119                                  <font class="stringliteral">": "</font> +
00120                                  e.what());
00121       }
00122       <font class="keywordflow">return</font> <font class="keyword">true</font>;
00123     }
00124 
<a name="l00126"></a><a class="code" href="classpqxx_1_1Result_1_1Field.html#a4">00126</a>     <font class="keyword">template</font>&lt;<font class="keyword">typename</font> T&gt; <font class="keywordtype">bool</font> to(T &amp;Obj, <font class="keyword">const</font> T &amp;Default) <font class="keyword">const</font>        <font class="comment">//[t12]</font>
00127     {
00128       <font class="keyword">const</font> <font class="keywordtype">bool</font> NotNull = to(Obj);
00129       <font class="keywordflow">if</font> (!NotNull)
00130         Obj = Default;
00131       <font class="keywordflow">return</font> NotNull;
00132     }
00133 
<a name="l00134"></a><a class="code" href="classpqxx_1_1Result_1_1Field.html#a5">00134</a>     <font class="keywordtype">bool</font> is_null()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> m_Home-&gt;GetIsNull(m_Index,m_Col); }   <font class="comment">//[t12]</font>
00135 
<a name="l00136"></a><a class="code" href="classpqxx_1_1Result_1_1Field.html#a6">00136</a>     <font class="keywordtype">int</font> size()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> m_Home-&gt;GetLength(m_Index,m_Col); }       <font class="comment">//[t11]</font>
00137 
00138   <font class="keyword">private</font>:
00139 
00140     Tuple::size_type m_Col;
00141   };
00142 
00143 
00145 
<a name="l00149"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">00149</a>   <font class="keyword">class </font><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> : 
00150     <font class="keyword">public</font> <a class="code" href="config_8h.html#a21">PGSTD</a>::iterator&lt;PGSTD::random_access_iterator_tag, 
00151                          const Tuple,
00152                          Result::size_type&gt;, 
00153     <font class="keyword">public</font> <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>
00154   {
00155   <font class="keyword">public</font>:
00156 
<a name="l00163"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a0">00163</a>     pointer operator-&gt;()  <font class="keyword">const</font> { <font class="keywordflow">return</font> <font class="keyword">this</font>; }                        <font class="comment">//[t12]</font>
<a name="l00164"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a1">00164</a>     reference operator*()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> *operator-&gt;(); }               <font class="comment">//[t12]</font>
00165 
00166     const_iterator operator++(<font class="keywordtype">int</font>);                                     <font class="comment">//[t12]</font>
<a name="l00167"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a3">00167</a>     <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;operator++() { ++m_Index; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }           <font class="comment">//[t1]</font>
00168     const_iterator operator--(<font class="keywordtype">int</font>);                                     <font class="comment">//[t12]</font>
<a name="l00169"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a5">00169</a>     <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;operator--() { --m_Index; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }           <font class="comment">//[t12]</font>
00170 
<a name="l00171"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a6">00171</a>     <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;operator+=(difference_type i)                       <font class="comment">//[t12]</font>
00172         { m_Index+=i; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
<a name="l00173"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a7">00173</a>     <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;operator-=(difference_type i)                       <font class="comment">//[t12]</font>
00174         { m_Index-=i; <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00175 
<a name="l00176"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a8">00176</a>     <font class="keywordtype">bool</font> operator==(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;i) <font class="keyword">const</font>                      <font class="comment">//[t12]</font>
00177         {<font class="keywordflow">return</font> m_Index==i.m_Index;}
<a name="l00178"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a9">00178</a>     <font class="keywordtype">bool</font> operator!=(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;i) <font class="keyword">const</font>                      <font class="comment">//[t12]</font>
00179         {<font class="keywordflow">return</font> m_Index!=i.m_Index;}
<a name="l00180"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a10">00180</a>     <font class="keywordtype">bool</font> operator&lt;(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;i) <font class="keyword">const</font>                       <font class="comment">//[t12]</font>
00181          {<font class="keywordflow">return</font> m_Index&lt;i.m_Index;}
<a name="l00182"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a11">00182</a>     <font class="keywordtype">bool</font> operator&lt;=(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;i) <font class="keyword">const</font>                      <font class="comment">//[t12]</font>
00183         {<font class="keywordflow">return</font> m_Index&lt;=i.m_Index;}
<a name="l00184"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a12">00184</a>     <font class="keywordtype">bool</font> operator&gt;(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;i) <font class="keyword">const</font>                       <font class="comment">//[t12]</font>
00185         {<font class="keywordflow">return</font> m_Index&gt;i.m_Index;}
<a name="l00186"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a13">00186</a>     <font class="keywordtype">bool</font> operator&gt;=(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> &amp;i) <font class="keyword">const</font>                      <font class="comment">//[t12]</font>
00187         {<font class="keywordflow">return</font> m_Index&gt;=i.m_Index;}
00188 
00189     <font class="keyword">inline</font> const_iterator <a class="code" href="namespacepqxx.html#a6">operator+</a>(difference_type o) <font class="keyword">const</font>;           <font class="comment">//[t12]</font>
00190 
00191     <font class="keyword">friend</font> const_iterator <a class="code" href="namespacepqxx.html#a6">operator+</a>(difference_type o, 
00192                                     const_iterator i);                  <font class="comment">//[t12]</font>
00193 
00194     <font class="keyword">inline</font> const_iterator operator-(difference_type o) <font class="keyword">const</font>;           <font class="comment">//[t12]</font>
00195 
00196     <font class="keyword">inline</font> difference_type operator-(const_iterator i) <font class="keyword">const</font>;           <font class="comment">//[t12]</font>
00197 
<a name="l00198"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a17">00198</a>     Result::size_type num()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> Row(); }                     <font class="comment">//[t1]</font>
00199 
00200   <font class="keyword">private</font>:
<a name="l00201"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#l0">00201</a>     <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="classpqxx_1_1Result.html">Result</a>;
00202     <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a>(<font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result.html">Result</a> *r, Result::size_type i) : <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>(r, i) {}
00203   };
00204 
<a name="l00205"></a><a class="code" href="classpqxx_1_1Result.html#a4">00205</a>   <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> begin()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a>(<font class="keyword">this</font>, 0); }      <font class="comment">//[t1]</font>
00206   <font class="keyword">inline</font> const_iterator end() <font class="keyword">const</font>;                                    <font class="comment">//[t1]</font>
00207   <font class="comment">// TODO: Reverse iterators</font>
00208 
<a name="l00209"></a><a class="code" href="classpqxx_1_1Result.html#a6">00209</a>   size_type size()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> m_Result ? PQntuples(m_Result) : 0; } <font class="comment">//[t2]</font>
<a name="l00210"></a><a class="code" href="classpqxx_1_1Result.html#a7">00210</a>   <font class="keywordtype">bool</font> empty()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> !m_Result || !PQntuples(m_Result); }      <font class="comment">//[t11]</font>
<a name="l00211"></a><a class="code" href="classpqxx_1_1Result.html#a8">00211</a>   size_type capacity()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> size(); }                         <font class="comment">//[]</font>
00212 
<a name="l00213"></a><a class="code" href="classpqxx_1_1Result.html#a9">00213</a>   <font class="keyword">const</font> <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a> operator[](size_type i)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>(<font class="keyword">this</font>, i); }  <font class="comment">//[t2]</font>
00214   <font class="keyword">const</font> Tuple at(size_type i) <font class="keyword">const</font>;                                    <font class="comment">//[t10]</font>
00215 
<a name="l00216"></a><a class="code" href="classpqxx_1_1Result.html#a11">00216</a>   <font class="keywordtype">void</font> clear() { LoseRef(); }                                           <font class="comment">//[]</font>
00217 
<a name="l00218"></a><a class="code" href="classpqxx_1_1Result.html#a12">00218</a>   Tuple::size_type Columns()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> PQnfields(m_Result); }      <font class="comment">//[t11]</font>
00219 
<a name="l00221"></a><a class="code" href="classpqxx_1_1Result.html#a13">00221</a>   Tuple::size_type ColumnNumber(<font class="keyword">const</font> <font class="keywordtype">char</font> Name[]) <font class="keyword">const</font>                <font class="comment">//[t11]</font>
00222         {<font class="keywordflow">return</font> PQfnumber(m_Result,Name);}
<a name="l00224"></a><a class="code" href="classpqxx_1_1Result.html#a14">00224</a>   Tuple::size_type ColumnNumber(std::string Name) <font class="keyword">const</font>                 <font class="comment">//[t11]</font>
00225         {<font class="keywordflow">return</font> ColumnNumber(Name.c_str());}
<a name="l00226"></a><a class="code" href="classpqxx_1_1Result.html#a15">00226</a>   <font class="keyword">const</font> <font class="keywordtype">char</font> *ColumnName(Tuple::size_type Number) <font class="keyword">const</font>                 <font class="comment">//[t11]</font>
00227         {<font class="keywordflow">return</font> PQfname(m_Result,Number);}
00228 
00229 <font class="keyword">private</font>:
00230   PGresult *m_Result;
00231   <font class="keyword">mutable</font> <font class="keywordtype">int</font> *m_Refcount;
00232 
<a name="l00233"></a><a class="code" href="classpqxx_1_1Result.html#l0">00233</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="classpqxx_1_1Result.html">Result</a>::<a class="code" href="classpqxx_1_1Result_1_1Field.html">Field</a>;
00234   const char *GetValue(size_type Row, <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>::size_type Col) const;
00235   bool GetIsNull(size_type Row, <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>::size_type Col) const;
00236   <a class="code" href="classpqxx_1_1Result_1_1Field.html">Field</a>::size_type GetLength(size_type Row, <a class="code" href="classpqxx_1_1Result_1_1Tuple.html">Tuple</a>::size_type Col) const;
00237 
<a name="l00238"></a><a class="code" href="classpqxx_1_1Result.html#l1">00238</a>   friend class <a class="code" href="classpqxx_1_1Connection.html">Connection</a>;
00239   explicit <a class="code" href="classpqxx_1_1Result.html">Result</a>(PGresult *rhs) : m_Result(rhs), m_Refcount(0) {MakeRef(rhs);}
00240   Result &amp;operator=(PGresult *);
00241   <font class="keywordtype">bool</font> operator!()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> !m_Result; }
00242   operator bool()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> m_Result != 0; }
00243   <font class="keywordtype">void</font> CheckStatus() <font class="keyword">const</font>;
00244 
00245 
00246   <font class="keywordtype">void</font> MakeRef(PGresult *);
00247   <font class="keywordtype">void</font> MakeRef(<font class="keyword">const</font> Result &amp;);
00248   <font class="keywordtype">void</font> LoseRef() <font class="keywordflow">throw</font> ();
00249 };
00250 
00251 
00252 
00253 
00254 <font class="keyword">template</font>&lt;&gt; <font class="keyword">inline</font> <font class="keywordtype">bool</font> Result::Field::to(PGSTD::string &amp;Obj)<font class="keyword"> const</font>
00255 <font class="keyword"></font>{
00256   <font class="keywordflow">if</font> (is_null())
00257     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00258   Obj = c_str();
00259   <font class="keywordflow">return</font> <font class="keyword">true</font>;
00260 }
00261 
00262 <font class="keyword">template</font>&lt;&gt; <font class="keyword">inline</font> <font class="keywordtype">bool</font> Result::Field::to(<font class="keyword">const</font> <font class="keywordtype">char</font> *&amp;Obj)<font class="keyword"> const</font>
00263 <font class="keyword"></font>{
00264   <font class="keywordflow">if</font> (is_null()) 
00265     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00266   Obj = c_str();
00267   <font class="keywordflow">return</font> <font class="keyword">true</font>;
00268 }
00269 
00270 
00271 <font class="keyword">inline</font> Result::Field 
<a name="l00272"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#a2">00272</a> Result::Tuple::operator[](Result::Tuple::size_type i)<font class="keyword"> const </font>
00273 <font class="keyword"></font>{ 
00274   <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1Field.html">Field</a>(*<font class="keyword">this</font>, i); 
00275 }
00276 
<a name="l00277"></a><a class="code" href="classpqxx_1_1Result_1_1Tuple.html#a8">00277</a> <font class="keyword">inline</font> Result::Tuple::size_type Result::Tuple::size()<font class="keyword"> const </font>
00278 <font class="keyword"></font>{ 
00279   <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1Tuple.html#n0">m_Home</a>-&gt;<a class="code" href="classpqxx_1_1Result.html#a12">Columns</a>(); 
00280 }
00281 
<a name="l00282"></a><a class="code" href="classpqxx_1_1Result_1_1Field.html#a2">00282</a> <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">char</font> *Result::Field::Name()<font class="keyword"> const </font>
00283 <font class="keyword"></font>{ 
00284   <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1Tuple.html#n0">m_Home</a>-&gt;<a class="code" href="classpqxx_1_1Result.html#a15">ColumnName</a>(m_Col); 
00285 }
00286 
00287 <font class="keyword">inline</font> Result::const_iterator 
<a name="l00288"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a14">00288</a> Result::const_iterator::operator+(difference_type o)<font class="keyword"> const</font>
00289 <font class="keyword"></font>{
00290   <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a>(<a class="code" href="classpqxx_1_1Result_1_1Tuple.html#n0">m_Home</a>, <a class="code" href="classpqxx_1_1Result_1_1Tuple.html#n1">m_Index</a> + o);
00291 }
00292 
00293 <font class="keyword">inline</font> Result::const_iterator 
<a name="l00294"></a><a class="code" href="namespacepqxx.html#a6">00294</a> <a class="code" href="namespacepqxx.html#a6">operator+</a>(Result::const_iterator::difference_type o, 
00295           <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">Result::const_iterator</a> i)
00296 {
00297   <font class="keywordflow">return</font> i + o;
00298 }
00299 
00300 <font class="keyword">inline</font> Result::const_iterator 
<a name="l00301"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a15">00301</a> Result::const_iterator::operator-(difference_type o)<font class="keyword"> const</font>
00302 <font class="keyword"></font>{
00303   <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a>(<a class="code" href="classpqxx_1_1Result_1_1Tuple.html#n0">m_Home</a>, <a class="code" href="classpqxx_1_1Result_1_1Tuple.html#n1">m_Index</a> - o);
00304 }
00305 
00306 <font class="keyword">inline</font> Result::const_iterator::difference_type 
<a name="l00307"></a><a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a16">00307</a> Result::const_iterator::operator-(<a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a> i)<font class="keyword"> const</font>
00308 <font class="keyword"></font>{ 
00309   <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a17">num</a>()-i.<a class="code" href="classpqxx_1_1Result_1_1const__iterator.html#a17">num</a>(); 
00310 }
00311 
<a name="l00312"></a><a class="code" href="classpqxx_1_1Result.html#a5">00312</a> <font class="keyword">inline</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">Result::const_iterator</a> Result::end()<font class="keyword"> const </font>
00313 <font class="keyword"></font>{ 
00314   <font class="keywordflow">return</font> <a class="code" href="classpqxx_1_1Result_1_1const__iterator.html">const_iterator</a>(<font class="keyword">this</font>, <a class="code" href="classpqxx_1_1Result.html#a6">size</a>()); 
00315 }
00316 
00317 } <font class="comment">// namespace</font>
00318 
00319 
00320 <font class="comment">/* </font>
00321 <font class="comment">[1] Scott Meyers, in one of his essential books, "Effective C++" and "More </font>
00322 <font class="comment">Effective C++", points out that it is good style to have any class containing </font>
00323 <font class="comment">a member of pointer type define its own destructor--just to show that it knows</font>
00324 <font class="comment">what it is doing.  This helps prevent nasty memory leak / double deletion bugs</font>
00325 <font class="comment">typically resulting from programmers' omission to deal with such issues in</font>
00326 <font class="comment">their destructors.</font>
00327 <font class="comment"></font>
00328 <font class="comment">The -Weffc++ option in gcc generates warnings for noncompliance with Scott's</font>
00329 <font class="comment">style guidelines, and hence necessitates the definition of this destructor,\</font>
00330 <font class="comment">trivial as it may be.</font>
00331 <font class="comment"></font>
00332 <font class="comment">[2] IIRC Alex Stepanov, the inventor of the STL, once remarked that having</font>
00333 <font class="comment">this as standard behaviour for pointers would be useful in some algorithms.</font>
00334 <font class="comment">So even if this makes me look foolish, I would seem to be in distinguished </font>
00335 <font class="comment">company.</font>
00336 <font class="comment">*/</font>
00337 
00338 <font class="preprocessor">#endif</font>
00339 <font class="preprocessor"></font>
</pre></div><hr><address align="right"><small>Generated on Sat Aug 10 21:52:38 2002 for libpqxx by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.16 </small></address>
</body>
</html>
