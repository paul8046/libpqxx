<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>util.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>util.h</h1><a href="util_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*-------------------------------------------------------------------------</span>
00002 <span class="comment"> *</span>
00003 <span class="comment"> *   FILE</span>
00004 <span class="comment"> *      pqxx/util.h</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *   DESCRIPTION</span>
00007 <span class="comment"> *      Various utility definitions for libpqxx</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * Copyright (c) 2001-2003, Jeroen T. Vermeulen &lt;jtv@xs4all.nl&gt;</span>
00010 <span class="comment"> *</span>
00011 <span class="comment"> *-------------------------------------------------------------------------</span>
00012 <span class="comment"> */</span>
00013 <span class="preprocessor">#ifndef PQXX_UTIL_H</span>
00014 <span class="preprocessor"></span><span class="preprocessor">#define PQXX_UTIL_H</span>
00015 <span class="preprocessor"></span>
00016 <span class="preprocessor">#include "<a class="code" href="compiler_8h.html">pqxx/compiler.h</a>"</span>
00017 
00018 <span class="preprocessor">#include &lt;cstdio&gt;</span>
00019 <span class="preprocessor">#include &lt;stdexcept&gt;</span>
00020 <span class="preprocessor">#include &lt;string&gt;</span>
00021 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
00022 
00023 <span class="keyword">extern</span> <span class="stringliteral">"C"</span>
00024 {
00025 <span class="preprocessor">#include "libpq-fe.h"</span>
00026 }
00027 
00028 
00029 <span class="keyword">namespace </span>pqxx
00030 {
<a name="l00031"></a><a class="code" href="namespacepqxx.html#a3">00031</a> <span class="keyword">typedef</span> <span class="keywordtype">long</span> <a class="code" href="namespacepqxx.html#a3">Result_size_type</a>;
<a name="l00032"></a><a class="code" href="namespacepqxx.html#a4">00032</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="namespacepqxx.html#a4">Tuple_size_type</a>;
00033 
00036 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(T);
00037 
00038 <span class="comment">// Not implemented to prevent accidents with irregular meaning of argument:</span>
00039 <span class="comment">// template&lt;&gt; inline const char *FmtString(const char *&amp;) { return "%s"; }</span>
00040 
<a name="l00041"></a><a class="code" href="namespacepqxx.html#a9">00041</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">short</span>)         { <span class="keywordflow">return</span> <span class="stringliteral">"%hd"</span>; }
<a name="l00042"></a><a class="code" href="namespacepqxx.html#a10">00042</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>){ <span class="keywordflow">return</span> <span class="stringliteral">"%hu"</span>; }
<a name="l00043"></a><a class="code" href="namespacepqxx.html#a11">00043</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">int</span>)           { <span class="keywordflow">return</span>  <span class="stringliteral">"%i"</span>; }
<a name="l00044"></a><a class="code" href="namespacepqxx.html#a12">00044</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">long</span>)          { <span class="keywordflow">return</span> <span class="stringliteral">"%li"</span>; }
00045 <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">unsigned</span>)      { <span class="keywordflow">return</span>  <span class="stringliteral">"%u"</span>; }
00046 <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) { <span class="keywordflow">return</span> <span class="stringliteral">"%lu"</span>; }
<a name="l00047"></a><a class="code" href="namespacepqxx.html#a13">00047</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">float</span>)         { <span class="keywordflow">return</span>  <span class="stringliteral">"%f"</span>; }
<a name="l00048"></a><a class="code" href="namespacepqxx.html#a14">00048</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">double</span>)        { <span class="keywordflow">return</span> <span class="stringliteral">"%lf"</span>; }
00049 <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">long</span> <span class="keywordtype">double</span>)   { <span class="keywordflow">return</span> <span class="stringliteral">"%Lf"</span>; }
<a name="l00050"></a><a class="code" href="namespacepqxx.html#a15">00050</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">char</span>)          { <span class="keywordflow">return</span>  <span class="stringliteral">"%c"</span>; }
00051 <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacepqxx.html#a8">FmtString</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) { <span class="keywordflow">return</span>  <span class="stringliteral">"%c"</span>; }
00052 
00053 
<a name="l00055"></a><a class="code" href="namespacepqxx.html#a16">00055</a> <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keyword">const</span> T &amp;Obj)
00056 {
00057   <span class="comment">// TODO: Find a decent way to determine max string length at compile time!</span>
00058   <span class="keywordtype">char</span> Buf[500];
00059   sprintf(Buf, <a class="code" href="namespacepqxx.html#a8">FmtString</a>(Obj), Obj);
00060   <span class="keywordflow">return</span> PGSTD::string(Buf);
00061 }
00062 
<a name="l00063"></a><a class="code" href="namespacepqxx.html#a17">00063</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keyword">const</span> PGSTD::string &amp;Obj) {<span class="keywordflow">return</span> Obj;}
<a name="l00064"></a><a class="code" href="namespacepqxx.html#a18">00064</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> &amp;Obj) { <span class="keywordflow">return</span> Obj; }
<a name="l00065"></a><a class="code" href="namespacepqxx.html#a19">00065</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keywordtype">char</span> *<span class="keyword">const</span> &amp;Obj) { <span class="keywordflow">return</span> Obj; }
00066 
<a name="l00067"></a><a class="code" href="namespacepqxx.html#a20">00067</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;Obj) 
00068 { 
00069   <span class="keywordflow">return</span> <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keywordtype">unsigned</span>(Obj));
00070 }
00071 
<a name="l00072"></a><a class="code" href="namespacepqxx.html#a21">00072</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keyword">const</span> <span class="keywordtype">short</span> &amp;Obj)
00073 {
00074   <span class="keywordflow">return</span> <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keywordtype">int</span>(Obj));
00075 }
00076 
<a name="l00077"></a><a class="code" href="namespacepqxx.html#a22">00077</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> &amp;Obj)
00078 {
00079   <span class="keywordflow">return</span> <a class="code" href="namespacepqxx.html#a16">ToString</a>(<span class="keywordtype">unsigned</span>(Obj));
00080 }
00081 
00082 
<a name="l00083"></a><a class="code" href="namespacepqxx.html#a23">00083</a> <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepqxx.html#a23">FromString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> Str[], T &amp;Obj)
00084 {
00085   <span class="keywordflow">if</span> (!Str) <span class="keywordflow">throw</span> PGSTD::runtime_error(<span class="stringliteral">"Attempt to convert NULL string to "</span> +
00086                                      PGSTD::string(<span class="keyword">typeid</span>(T).name()));
00087 
00088   <span class="keywordflow">if</span> (sscanf(Str, <a class="code" href="namespacepqxx.html#a8">FmtString</a>(Obj), &amp;Obj) != 1)
00089     <span class="keywordflow">throw</span> PGSTD::runtime_error(<span class="stringliteral">"Cannot convert value '"</span> + 
00090                              PGSTD::string(Str) + 
00091                              <span class="stringliteral">"' to "</span> + <span class="keyword">typeid</span>(T).name());
00092 }
00093 
00094 
<a name="l00095"></a><a class="code" href="namespacepqxx.html#a24">00095</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepqxx.html#a23">FromString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> Str[], PGSTD::string &amp;Obj)
00096 {
00097   <span class="keywordflow">if</span> (!Str) 
00098     <span class="keywordflow">throw</span> PGSTD::runtime_error(<span class="stringliteral">"Attempt to convert NULL C string to C++ "</span>
00099                                <span class="stringliteral">"string"</span>);
00100   Obj = Str;
00101 }
00102 
00103 
<a name="l00104"></a><a class="code" href="namespacepqxx.html#a25">00104</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepqxx.html#a23">FromString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> Str[], <span class="keyword">const</span> <span class="keywordtype">char</span> *&amp;Obj)
00105 {
00106   <span class="keywordflow">if</span> (!Str)
00107     <span class="keywordflow">throw</span> PGSTD::runtime_error(<span class="stringliteral">"Attempt to read NULL string"</span>);
00108   Obj = Str;
00109 }
00110 
<a name="l00111"></a><a class="code" href="namespacepqxx.html#a26">00111</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacepqxx.html#a23">FromString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> Str[], <span class="keywordtype">bool</span> &amp;Obj)
00112 {
00113   <span class="keywordflow">if</span> (!Str)
00114     <span class="keywordflow">throw</span> PGSTD::runtime_error(<span class="stringliteral">"Attempt to read NULL string"</span>);
00115 
00116   <span class="keywordflow">switch</span> (Str[0])
00117   {
00118   <span class="keywordflow">case</span> 0:
00119   <span class="keywordflow">case</span> <span class="charliteral">'f'</span>:
00120     Obj = <span class="keyword">false</span>;
00121     <span class="keywordflow">break</span>;
00122   <span class="keywordflow">case</span> <span class="charliteral">'0'</span>:
00123     {
00124       <span class="keywordtype">int</span> I;
00125       <a class="code" href="namespacepqxx.html#a23">FromString</a>(Str, I);
00126       Obj = (I != 0);
00127     }
00128     <span class="keywordflow">break</span>;
00129   <span class="keywordflow">default</span>:
00130     Obj = <span class="keyword">true</span>;
00131   }
00132 }
00133 
00134 
00137 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; PGSTD::string <a class="code" href="namespacepqxx.html#a27">Quote</a>(<span class="keyword">const</span> T &amp;Obj, <span class="keywordtype">bool</span> EmptyIsNull=<span class="keyword">false</span>);
00138 
00139 
<a name="l00141"></a><a class="code" href="namespacepqxx.html#a28">00141</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a27">Quote</a>(<span class="keyword">const</span> PGSTD::string &amp;Obj, 
00142                                       <span class="keywordtype">bool</span> EmptyIsNull)
00143 {
00144   <span class="keywordflow">if</span> (EmptyIsNull &amp;&amp; Obj.empty()) <span class="keywordflow">return</span> <span class="stringliteral">"null"</span>;
00145 
00146   PGSTD::string <a class="code" href="classpqxx_1_1Result.html">Result</a>;
00147   Result.reserve(Obj.size() + 2);
00148   Result += <span class="stringliteral">"'"</span>;
00149 
00150 <span class="preprocessor">#ifdef HAVE_PQESCAPESTRING</span>
00151 <span class="preprocessor"></span>
00152   <span class="keywordtype">char</span> *<span class="keyword">const</span> Buf = <span class="keyword">new</span> <span class="keywordtype">char</span>[2*Obj.size() + 1];
00153   <span class="keywordflow">try</span>
00154   {
00155     PQescapeString(Buf, Obj.c_str(), Obj.size());
00156     Result += Buf;
00157   }
00158   <span class="keywordflow">catch</span> (<span class="keyword">const</span> PGSTD::exception &amp;)
00159   {
00160     <span class="keyword">delete</span> [] Buf;
00161     <span class="keywordflow">throw</span>;
00162   }
00163   <span class="keyword">delete</span> [] Buf;
00164 
00165 <span class="preprocessor">#else</span>
00166 <span class="preprocessor"></span>
00167   <span class="keywordflow">for</span> (PGSTD::string::size_type i=0; i &lt; Obj.size(); ++i)
00168   {
00169     <span class="keywordflow">if</span> (isgraph(Obj[i]))
00170     {
00171       <span class="keywordflow">switch</span> (Obj[i])
00172       {
00173       <span class="keywordflow">case</span> <span class="charliteral">'\''</span>:
00174       <span class="keywordflow">case</span> <span class="charliteral">'\\'</span>:
00175         Result += <span class="charliteral">'\\'</span>;
00176       }
00177       Result += Obj[i];
00178     }
00179     <span class="keywordflow">else</span>
00180     {
00181         <span class="keywordtype">char</span> s[10];
00182         sprintf(s, 
00183                 <span class="stringliteral">"\\%03o"</span>, 
00184                 static_cast&lt;unsigned int&gt;(static_cast&lt;unsigned char&gt;(Obj[i])));
00185         Result.append(s, 4);
00186     }
00187   }
00188 
00189 <span class="preprocessor">#endif</span>
00190 <span class="preprocessor"></span>
00191   <span class="keywordflow">return</span> Result + <span class="charliteral">'\''</span>;
00192 }
00193 
00194 
<a name="l00197"></a><a class="code" href="namespacepqxx.html#a29">00197</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a27">Quote</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> &amp; Obj, 
00198                                       <span class="keywordtype">bool</span> EmptyIsNull)
00199 {
00200   <span class="keywordflow">if</span> (!Obj) <span class="keywordflow">return</span> <span class="stringliteral">"null"</span>;
00201   <span class="keywordflow">return</span> <a class="code" href="namespacepqxx.html#a27">Quote</a>(PGSTD::string(Obj), EmptyIsNull);
00202 }
00203 
00204 
00206 
<a name="l00211"></a><a class="code" href="namespacepqxx.html#a30">00211</a> <span class="keyword">template</span>&lt;<span class="keywordtype">int</span> LEN&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a27">Quote</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> (&amp;Obj)[LEN],
00212                                              <span class="keywordtype">bool</span> EmptyIsNull=<span class="keyword">false</span>)    <span class="comment">//[t18]</span>
00213 {
00214   <span class="keywordflow">return</span> <a class="code" href="namespacepqxx.html#a27">Quote</a>(PGSTD::string(Obj), EmptyIsNull);
00215 }
00216 
00217 
<a name="l00221"></a><a class="code" href="namespacepqxx.html#a27">00221</a> <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> PGSTD::string <a class="code" href="namespacepqxx.html#a27">Quote</a>(<span class="keyword">const</span> T &amp;Obj, <span class="keywordtype">bool</span> EmptyIsNull)
00222 {
00223   <span class="keywordflow">return</span> <a class="code" href="namespacepqxx.html#a27">Quote</a>(<a class="code" href="namespacepqxx.html#a16">ToString</a>(Obj), EmptyIsNull);
00224 }
00225 
00226 
00227 
00229 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; PGSTD::string <a class="code" href="namespacepqxx.html#a5">Classname</a>(<span class="keyword">const</span> T *);
00230 
00231 
00237 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> GUEST&gt;
<a name="l00238"></a><a class="code" href="classpqxx_1_1Unique.html">00238</a> <span class="keyword">class </span><a class="code" href="classpqxx_1_1Unique.html">Unique</a>
00239 {
00240 <span class="keyword">public</span>:
<a name="l00241"></a><a class="code" href="classpqxx_1_1Unique.html#a0">00241</a>   <a class="code" href="classpqxx_1_1Unique.html#a0">Unique</a>() : m_Guest(0) {}
00242 
<a name="l00243"></a><a class="code" href="classpqxx_1_1Unique.html#a1">00243</a>   <span class="keyword">const</span> GUEST *<a class="code" href="classpqxx_1_1Unique.html#a1">get</a>() <span class="keyword">const</span> <span class="keywordflow">throw</span> () { <span class="keywordflow">return</span> m_Guest; }
00244 
<a name="l00245"></a><a class="code" href="classpqxx_1_1Unique.html#a2">00245</a>   <span class="keywordtype">void</span> <a class="code" href="classpqxx_1_1Unique.html#a2">Register</a>(<span class="keyword">const</span> GUEST *G)
00246   {
00247     <span class="keywordflow">if</span> (!G) <span class="keywordflow">throw</span> PGSTD::logic_error(<span class="stringliteral">"Internal libpqxx error: NULL "</span> + 
00248                                      <a class="code" href="namespacepqxx.html#a5">Classname</a>(G));
00249     
00250     <span class="keywordflow">if</span> (m_Guest)
00251     {
00252       <span class="keywordflow">if</span> (G == m_Guest)
00253         <span class="keywordflow">throw</span> PGSTD::logic_error(<a class="code" href="namespacepqxx.html#a5">Classname</a>(G) +
00254                                  <span class="stringliteral">" '"</span> +
00255                                  G-&gt;Name() +
00256                                  <span class="stringliteral">"' started more than once without closing"</span>);
00257 
00258       <span class="keywordflow">throw</span> PGSTD::logic_error(<span class="stringliteral">"Started "</span> + 
00259                                <a class="code" href="namespacepqxx.html#a5">Classname</a>(G) +
00260                                <span class="stringliteral">" '"</span> + 
00261                                G-&gt;Name() + 
00262                                <span class="stringliteral">"' while '"</span> +
00263                                m_Guest-&gt;Name() +
00264                                <span class="stringliteral">"' was still active"</span>);
00265     }
00266     
00267     m_Guest = G;
00268   }
00269 
<a name="l00270"></a><a class="code" href="classpqxx_1_1Unique.html#a3">00270</a>   <span class="keywordtype">void</span> <a class="code" href="classpqxx_1_1Unique.html#a3">Unregister</a>(<span class="keyword">const</span> GUEST *G)
00271   {
00272     <span class="keywordflow">if</span> (G != m_Guest)
00273     {
00274       <span class="keywordflow">if</span> (!G) 
00275         <span class="keywordflow">throw</span> PGSTD::logic_error(<span class="stringliteral">"Closing NULL "</span> + <a class="code" href="namespacepqxx.html#a5">Classname</a>(G));
00276       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!m_Guest)
00277         <span class="keywordflow">throw</span> PGSTD::logic_error(<span class="stringliteral">"Closing "</span> + 
00278                                  <a class="code" href="namespacepqxx.html#a5">Classname</a>(G) +
00279                                  <span class="stringliteral">" '"</span> +
00280                                  G-&gt;Name() +
00281                                  <span class="stringliteral">"' which wasn't open"</span>);
00282       <span class="keywordflow">else</span>
00283         <span class="keywordflow">throw</span> PGSTD::logic_error(<span class="stringliteral">"Closing wrong "</span> + 
00284                                  <a class="code" href="namespacepqxx.html#a5">Classname</a>(G) +
00285                                  <span class="stringliteral">"; expected '"</span> +
00286                                  m_Guest-&gt;Name() +
00287                                  <span class="stringliteral">"' but got '"</span> +
00288                                  G-&gt;Name() +
00289                                  <span class="stringliteral">"'"</span>);
00290     }
00291 
00292     m_Guest = 0;
00293   }
00294 
00295 <span class="keyword">private</span>:
00296   <span class="keyword">const</span> GUEST *m_Guest;
00297 
00298   <span class="comment">// Not allowed:</span>
00299   <a class="code" href="classpqxx_1_1Unique.html#a0">Unique</a>(<span class="keyword">const</span> Unique &amp;);
00300   <a class="code" href="classpqxx_1_1Unique.html#a0">Unique</a> &amp;operator=(<span class="keyword">const</span> Unique &amp;);
00301 };
00302 
00303 }
00304 
00305 <span class="preprocessor">#endif</span>
00306 <span class="preprocessor"></span>
</pre></div><hr><address style="align: right;"><small>Generated on Sun Mar 30 20:02:13 2003 for libpqxx by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
